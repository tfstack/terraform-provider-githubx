---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "githubx_repository_file Resource - githubx"
subcategory: ""
description: |-
  Creates and manages a file in a GitHub repository.
---

# githubx_repository_file (Resource)

Creates and manages a file in a GitHub repository.

## Example Usage

```terraform
terraform {
  required_providers {
    githubx = {
      source  = "tfstack/githubx"
      version = "~> 0.1"
    }
  }
}

# Configure the provider
provider "githubx" {
  owner = "cloudbuildlab" # Optional: set your GitHub username or organization. If not set, will use authenticated user.
  # Token can be provided here or via GITHUB_TOKEN environment variable
  # token = "your-github-token-here"
}

# First, create a repository
resource "githubx_repository" "example" {
  name        = "my-file-example-repo"
  description = "Repository for file examples"
  visibility  = "public"
  auto_init   = true # Initialize with README to create default branch
}

# Example 1: Create a simple file on the default branch
# Note: The repository is auto-initialized with a README.md, so we'll create a different file
resource "githubx_repository_file" "docs" {
  repository = githubx_repository.example.name
  file       = "docs/GETTING_STARTED.md"
  content    = "# Getting Started\n\nThis is a getting started guide managed by Terraform."
}

output "docs_commit_sha" {
  value = githubx_repository_file.docs.commit_sha
}

output "docs_sha" {
  value = githubx_repository_file.docs.sha
}

# Example 2: Create a file on a specific branch
resource "githubx_repository_branch" "develop" {
  repository = githubx_repository.example.name
  branch     = "develop"
  depends_on = [githubx_repository.example]
}

resource "githubx_repository_file" "config" {
  repository = githubx_repository.example.name
  file       = ".github/config.yml"
  branch     = githubx_repository_branch.develop.branch
  content    = "repository:\n  name: ${githubx_repository.example.name}\n  description: ${githubx_repository.example.description}\n"
  depends_on = [githubx_repository_branch.develop]
}

output "config_file_ref" {
  value = githubx_repository_file.config.ref
}

# Example 3: Create a file with custom commit message and author
resource "githubx_repository_file" "license" {
  repository     = githubx_repository.example.name
  file           = "LICENSE"
  content        = "MIT License\n\nCopyright (c) 2024\n"
  commit_message = "Add MIT license file"
  commit_author  = "Terraform Bot"
  commit_email   = "terraform@example.com"
}

output "license_commit_message" {
  value = githubx_repository_file.license.commit_message
}

# Example 4: Create a file with auto-create branch feature
resource "githubx_repository_file" "feature_file" {
  repository                      = githubx_repository.example.name
  file                            = "feature/new-feature.md"
  branch                          = "feature/new-feature"
  content                         = "# New Feature\n\nThis is a new feature file."
  autocreate_branch               = true
  autocreate_branch_source_branch = "main"
  depends_on                      = [githubx_repository.example]
}

output "feature_file_id" {
  value = githubx_repository_file.feature_file.id
}

# Example 5: Overwrite existing file (created outside Terraform or by auto-init)
# Note: The repository auto_init creates a README.md, so we can overwrite it
# This demonstrates overwrite_on_create for files that exist but aren't managed by Terraform
resource "githubx_repository_file" "readme" {
  repository          = githubx_repository.example.name
  file                = "README.md"
  content             = "# My Example Repository\n\nThis is an updated README managed by Terraform.\n\n## Features\n\n- Feature 1\n- Feature 2\n"
  overwrite_on_create = true
  depends_on          = [githubx_repository.example]
}

output "readme_sha" {
  value = githubx_repository_file.readme.sha
}

# Example 6: Update an existing file (modify the same resource)
# This shows how to update a file by changing the content in the same resource
resource "githubx_repository_file" "changelog" {
  repository = githubx_repository.example.name
  file       = "CHANGELOG.md"
  content    = "# Changelog\n\n## [Unreleased]\n\n### Added\n- Initial version\n"
}

output "changelog_commit_sha" {
  value = githubx_repository_file.changelog.commit_sha
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `content` (String) The file's content.
- `file` (String) The file path to manage.
- `repository` (String) The GitHub repository name.

### Optional

- `autocreate_branch` (Boolean) Automatically create the branch if it could not be found. Subsequent reads if the branch is deleted will occur from 'autocreate_branch_source_branch'.
- `autocreate_branch_source_branch` (String) The branch name to start from, if 'autocreate_branch' is set. Defaults to 'main'.
- `autocreate_branch_source_sha` (String) The commit hash to start from, if 'autocreate_branch' is set. Defaults to the tip of 'autocreate_branch_source_branch'. If provided, 'autocreate_branch_source_branch' is ignored.
- `branch` (String) The branch name, defaults to the repository's default branch.
- `commit_author` (String) The commit author name, defaults to the authenticated user's name. GitHub app users may omit author and email information so GitHub can verify commits as the GitHub App.
- `commit_email` (String) The commit author email address, defaults to the authenticated user's email address. GitHub app users may omit author and email information so GitHub can verify commits as the GitHub App.
- `commit_message` (String) The commit message when creating, updating or deleting the file.
- `overwrite_on_create` (Boolean) Enable overwriting existing files, defaults to "false".

### Read-Only

- `commit_sha` (String) The SHA of the commit that modified the file.
- `id` (String) The Terraform state ID (repository:file).
- `ref` (String) The name of the commit/branch/tag.
- `sha` (String) The blob SHA of the file.
